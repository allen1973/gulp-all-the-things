# gulp-all-the-things
![How to automate all the things with Gulp](https://cdn-images-1.medium.com/max/2000/1*HPW7aLlD_6UXm8eb0E3hxg.jpeg "How to automate all the things with Gulp")

## How to create a task automation workflow using Gulp?
*This tutorial will demo how to set up a bare bones 
Gulp configuration for automating the time consuming tasks 
you need to run on a regular basis.*

It consists of three basic files which will be the 
basis for showing the power of Gulp, an index.html,
a style.css and a script.js. Have in mind these files
are only made for demonstational purposes.

The core of Gulp lies in the gulpfile.js, it is the entry
point for the task automation itself. All the tasks we will
be running in this tutorial will be written in the gulpfile.js .

To clone this repo to your local machine run:
```
git clone https://github.com/adnanrahic/gulp-all-the-things.git
```

After you've cloned the repo, don't forget to run:
```
npm install
```

And of course install Gulp globally on your machine:
```
npm install -g gulp
```

The full tutorial can be found at:
https://hackernoon.com/how-to-automate-all-the-things-with-gulp-b21a3fc96885

<section name="bf30" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="b6e5" id="b6e5" class="graf graf--h4 graf--leading">TLDR;</h4><p name="a616" id="a616" class="graf graf--p graf-after--h4">You can severely hurt my feelings by only reading this TLDR; or be awesome instead, and read the whole article. Have fun!</p><ol class="postList"><li name="8bf8" id="8bf8" class="graf graf--li graf-after--p">Three main Gulp commands: <code class="markup--code markup--li-code">gulp.task</code>, <code class="markup--code markup--li-code">gulp.src</code>, <code class="markup--code markup--li-code">gulp.dest</code>.</li><li name="7796" id="7796" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">pipe</code>ing is freaking awesome! The <code class="markup--code markup--li-code">pipe()</code> method is built into Node.js and is used to copy files from one folder to another.</li><li name="4884" id="4884" class="graf graf--li graf-after--li">Have a logical folder structure, with three main folders. The <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">src</em></strong> folder for pre-processed files, <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">tmp</em></strong> for the local development server and <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">dist</em></strong> for processed and minified files.</li><li name="0af2" id="0af2" class="graf graf--li graf-after--li">Create separate tasks for <code class="markup--code markup--li-code">pipe</code>ing HTML, CSS and JavaScript files from <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">src</em></strong> to <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">tmp</em></strong>.</li><li name="66a3" id="66a3" class="graf graf--li graf-after--li">Combine the HTML, CSS and JavaScript tasks into one main <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">‘copy’</em></strong> task. This will let you copy all the files with one command.</li><li name="d858" id="d858" class="graf graf--li graf-after--li">After all files have been copied you want to reference them automatically in your main <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">index.html</em></strong>. This is done with an <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">‘inject’</em></strong> task and is called injecting dependencies.</li><li name="87dd" id="87dd" class="graf graf--li graf-after--li">When the files have been copied and injected it’s time to run a development server on the <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">tmp</em></strong> folder.</li><li name="20d8" id="20d8" class="graf graf--li graf-after--li">While the server is running you<strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em"> ‘watch’</em></strong> for changes, and enable live reloading on the local development server.</li><li name="216a" id="216a" class="graf graf--li graf-after--li">Satisfied with your code? Go ahead and<strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em"> ‘build’</em></strong> the production files and place them in the <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">dist </em></strong>directory.</li><li name="de51" id="de51" class="graf graf--li graf-after--li">Delete <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">tmp</em></strong> and <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">dist</em></strong> before pushing to GitHub. (Or just add them to your&nbsp;.gitignore)</li><li name="6ae1" id="6ae1" class="graf graf--li graf-after--li graf--trailing">The code you will be writing during this tutorial is on GitHub and will be linked at the bottom of the article. Sorry, but you have to scroll to the bottom.&nbsp;:)</li></ol></div></div></section>
<div class="section-inner sectionLayout--insetColumn"><h4 name="7068" id="7068" class="graf graf--h4 graf--leading">Install the&nbsp;tools</h4><p name="1585" id="1585" class="graf graf--p graf-after--h4">First of all, you will need to have Node installed on your machine. To check if you do, open up a command prompt and type <code class="markup--code markup--p-code">node -v</code>. The version number of Node you have installed will be shown as output on the command line. If not, you do not have Node installed on your machine. Not to worry, head over to Node’s official site to get started.</p><div name="ffee" id="ffee" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://nodejs.org/en/download/" data-href="https://nodejs.org/en/download/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://nodejs.org/en/download/"><strong class="markup--strong markup--mixtapeEmbed-strong">Download | Node.js</strong><br><em class="markup--em markup--mixtapeEmbed-em">Download the Node.js source code or a pre-built installer for your platform, and start developing today.</em>nodejs.org</a><a href="https://nodejs.org/en/download/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="6b8b4efc7defcb0fc1edb85964cd4557" data-thumbnail-img-id="0*_7oqbsCHF58bFb2K." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*_7oqbsCHF58bFb2K.);"></a></div><p name="02ec" id="02ec" class="graf graf--p graf-after--mixtapeEmbed">All done? Now you’re set to install the necessary tool regarding the actual task automation. Go back to your command prompt and run:</p><pre name="75da" id="75da" class="graf graf--pre graf-after--p">npm install -g gulp</pre><p name="b787" id="b787" class="graf graf--p graf-after--pre"><em class="markup--em markup--p-em">Note: Linux and Mac users will most likely need to run this command with </em><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">sudo</em></strong><em class="markup--em markup--p-em">, to enable the required permissions.</em></p><p name="3560" id="3560" class="graf graf--p graf-after--p">You’ve now installed Gulp globally on your machine. This step is important as it is required for Gulp to be visible in your command line regardless of which directory you are in. The more technical explanation would be that Gulp has now been added to the <strong class="markup--strong markup--p-strong">PATH</strong>.</p><p name="b30c" id="b30c" class="graf graf--p graf-after--p">You’re now ready to get started with writing tasks.</p><h4 name="78f3" id="78f3" class="graf graf--h4 graf-after--p">Introduce yourself</h4><p name="d275" id="d275" class="graf graf--p graf-after--h4">There are three main commands Gulp provides:</p><ul class="postList"><li name="88a4" id="88a4" class="graf graf--li graf-after--p"><code class="markup--code markup--li-code">gulp.task</code> — defines a new task giving it a name, an array of dependencies and a callback function, which will be called when the task is run.</li><li name="c6a8" id="c6a8" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">gulp.src</code> — sets the source folder where files are located.</li><li name="a03e" id="a03e" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">gulp.dest</code> — sets the destination folder where files will be placed.</li></ul><p name="8c89" id="8c89" class="graf graf--p graf-after--li">The backbone of using Gulp at all lies in the interaction between <code class="markup--code markup--p-code">gulp.src</code> and <code class="markup--code markup--p-code">gulp.dest</code> with the&nbsp;<code class="markup--code markup--p-code">.pipe</code> method as a bridge.</p><p name="f984" id="f984" class="graf graf--p graf-after--p">The&nbsp;<code class="markup--code markup--p-code">.pipe</code> method is a default method in Node.js, not to delve deeper into this particular subject, view it as a means to copy files from one directory to another.</p><p name="295f" id="295f" class="graf graf--p graf-after--p">What does this mean?</p><p name="878f" id="878f" class="graf graf--p graf-after--p">Gulp by itself only provides the basis needed for task automation. The bulk of the work you would need in a development workflow lies in the vast plug-ins created for Gulp. Without them, you only have a shell. Of course, you could write your own, but with more than 3000 available for download on <a href="https://www.npmjs.com/" data-href="https://www.npmjs.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">npm</strong></a>, I would advise against this. Do not reinvent the wheel. Use the resources which are already at your disposal. Feel free to take a look <a href="http://gulpjs.com/plugins/" data-href="http://gulpjs.com/plugins/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a>, or just Google “gulp <em class="markup--em markup--p-em">whatever</em>” and witness the magic.</p><h4 name="989a" id="989a" class="graf graf--h4 graf-after--p">Baby steps</h4><p name="fa02" id="fa02" class="graf graf--p graf-after--h4">Let’s code up a very basic backbone, just to wrap our heads around the concept. We’ll incrementally progress further down this article.</p><p name="f7c5" id="f7c5" class="graf graf--p graf-after--p">First of all create a new directory giving it a super inspiring name, something like <em class="markup--em markup--p-em">super-awesome-gulp-tutorial</em> should be fine. Once you’ve done this open up a command prompt within this directory. As Gulp is a package on <strong class="markup--strong markup--p-strong">npm</strong> you will need to initialize <strong class="markup--strong markup--p-strong">npm</strong> to have a link to the package manager.</p><p name="8f38" id="8f38" class="graf graf--p graf-after--p">Not familiar with <strong class="markup--strong markup--p-strong">npm — the Node Package Manager</strong>? Take a look here.</p><div name="2611" id="2611" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://www.npmjs.com/" data-href="https://www.npmjs.com/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://www.npmjs.com/"><strong class="markup--strong markup--mixtapeEmbed-strong">npm</strong><br><em class="markup--em markup--mixtapeEmbed-em">npm is the package manager for javascript</em>www.npmjs.com</a><a href="https://www.npmjs.com/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="ac76028e07fa565ed4006978107f5ce6" data-thumbnail-img-id="0*bWNwvbkC6s09uHgE." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*bWNwvbkC6s09uHgE.);"></a></div><p name="69c7" id="69c7" class="graf graf--p graf-after--mixtapeEmbed">After you’ve done this, you will also need to install Gulp locally. Why? Gulp will always use the local version of itself in project folders.</p><pre name="35a0" id="35a0" class="graf graf--pre graf-after--p">npm init<br>npm install gulp --save-dev</pre><p name="66e6" id="66e6" class="graf graf--p graf-after--pre">Installing it with the <em class="markup--em markup--p-em">--save-dev </em>flag will include it in the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">package.json</em></strong> beneath the development dependencies. Great job, ready for some code? Let’s jump in. Create a new file, name it <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">gulpfile.js</em></strong><em class="markup--em markup--p-em">. </em>This file is the entry point for Gulp, here’s where you will be writing all the code to automate tasks. Go ahead and write this in your <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">gulpfile.js</em></strong>:</p><pre name="e972" id="e972" class="graf graf--pre graf-after--p">var gulp = require('gulp');</pre><pre name="999c" id="999c" class="graf graf--pre graf-after--pre">gulp.task('default', function () {<br>  console.log('Hello World!');<br>});</pre><p name="ec4a" id="ec4a" class="graf graf--p graf-after--pre">Congratulations. You’ve just written your first Gulp task. I bet this seems familiar to you, an event listener followed by a callback function. Let’s try it out. Jump back to your command prompt, and just type:</p><pre name="0b15" id="0b15" class="graf graf--pre graf-after--p">gulp</pre><p name="12cc" id="12cc" class="graf graf--p graf-after--pre">Hit enter and you will see something like this get logged back to the command line:</p><pre name="47a3" id="47a3" class="graf graf--pre graf-after--p">[19:41:16] Using gulpfile ~/super-awesome-gulp-tutorial/gulpfile.js<br>[19:41:16] Starting 'default'...<br>Hello World!<br>[19:41:16] Finished 'default' after 162 μs</pre><p name="4ed4" id="4ed4" class="graf graf--p graf-after--pre">By using the keyword <code class="markup--code markup--p-code">gulp</code> you told Gulp to interpret a particular task, and as nothing was written after the keyword, the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">‘default’</em></strong> task was run. Let’s say you have a task named ‘<strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">build</em></strong><em class="markup--em markup--p-em">’</em> and you wish to run it. Writing <code class="markup--code markup--p-code">gulp build</code> will trigger that particular Gulp task. You can even run multiple tasks, which is also perfectly fine. It looks like this.</p><pre name="3525" id="3525" class="graf graf--pre graf-after--p">gulp sometask anothertask</pre><p name="f860" id="f860" class="graf graf--p graf-after--pre">Have you been following along? Great, you’re now ready to code some serious stuff. Let’s get a development environment up and running.</p><h4 name="0d17" id="0d17" class="graf graf--h4 graf-after--p">Full hacker mode,&nbsp;ON</h4><p name="752e" id="752e" class="graf graf--p graf-after--h4">I’ll start by outlining a basic folder structure of a sample project. One of many best practices is to have three main folders, <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">src</em></strong> for all of your source files, <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">dist</em></strong> for the bundled and minified files, and finally a <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em></strong><em class="markup--em markup--p-em"> </em>directory which will be used as the sandbox for our local web server.</p><ul class="postList"><li name="c6e1" id="c6e1" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">src</strong> — source files, pre-processed, un-minified.</li><li name="a05b" id="a05b" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">tmp</strong> — development files, pre-processed, un-minified. The directory where you will be running the web server.</li><li name="5960" id="5960" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">dist</strong> — production files, processed, minified.</li></ul><p name="f7cd" id="f7cd" class="graf graf--p graf-after--li">Create the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">src</em></strong> folder, but do <strong class="markup--strong markup--p-strong">not</strong> create the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">dist</em> nor the <em class="markup--em markup--p-em">tmp</em> </strong>folder yet. You will see a bit further down how you can create it dynamically and incorporate it into an automated task. Let’s add some files to the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">src</em></strong> folder, to finally have something to play with. An <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">index.html</em></strong>, a <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">script.js</em></strong> and a <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">style.css</em></strong> should be more than enough. These will serve as your source files, the only files you will be editing. Gulp will handle everything else.</p><p name="2a64" id="2a64" class="graf graf--p graf-after--p">Let’s get started with the Gulping of all the things!</p><h4 name="0bcc" id="0bcc" class="graf graf--h4 graf-after--p">Step 1 — Set up the folder structure</h4><p name="0595" id="0595" class="graf graf--p graf-after--h4">First of all you need a <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">paths</em></strong> variable to store all the file and directory paths of your project. Place this right under where you required gulp.</p><pre name="d9a5" id="d9a5" class="graf graf--pre graf-after--p">// gulpfile.js<br>var gulp = require('gulp');<br>var paths = {<br>  src: 'src/**/*',<br>  srcHTML: 'src/**/*.html',<br>  srcCSS: 'src/**/*.css',<br>  srcJS: 'src/**/*.js',</pre><pre name="f435" id="f435" class="graf graf--pre graf-after--pre">  tmp: 'tmp',<br>  tmpIndex: 'tmp/index.html',<br>  tmpCSS: 'tmp/**/*.css',<br>  tmpJS: 'tmp/**/*.js',</pre><pre name="4ffe" id="4ffe" class="graf graf--pre graf-after--pre">  dist: 'dist',<br>  distIndex: 'dist/index.html',<br>  distCSS: 'dist/**/*.css',<br>  distJS: 'dist/**/*.js'<br>};</pre><pre name="b4ad" id="b4ad" class="graf graf--pre graf-after--pre">gulp.task('default', function () {<br>  console.log('Hello World!');<br>});</pre><p name="3b8a" id="3b8a" class="graf graf--p graf-after--pre">Specifying the <code class="markup--code markup--p-code">/**/*</code> part is equivalent to including all files within the folder and any possible subfolders.</p><h4 name="290a" id="290a" class="graf graf--h4 graf-after--p">Step 2 — Set up the HTML&nbsp;task</h4><p name="fb8f" id="fb8f" class="graf graf--p graf-after--h4">Now you need to create a task to copy all HTML files from the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">src</em></strong> directory to the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em></strong> directory where you’ll be running the web server.</p><pre name="cf58" id="cf58" class="graf graf--pre graf-after--p">gulp.task('html', function () {<br>  return gulp.src(paths.srcHTML).pipe(gulp.dest(paths.tmp));<br>});</pre><h4 name="60db" id="60db" class="graf graf--h4 graf-after--pre">Step 3 — Set up the CSS&nbsp;task</h4><p name="8107" id="8107" class="graf graf--p graf-after--h4">Same thing for the CSS files.</p><pre name="2a18" id="2a18" class="graf graf--pre graf-after--p">gulp.task('css', function () {<br>  return gulp.src(paths.srcCSS).pipe(gulp.dest(paths.tmp));<br>});</pre><h4 name="f013" id="f013" class="graf graf--h4 graf-after--pre">Step 4 — Set up the JavaScript task</h4><p name="117b" id="117b" class="graf graf--p graf-after--h4">Yup, same thing for the JavaScript files.</p><pre name="15eb" id="15eb" class="graf graf--pre graf-after--p">gulp.task('js', function () {<br>  return gulp.src(paths.srcJS).pipe(gulp.dest(paths.tmp));<br>});</pre><h4 name="efba" id="efba" class="graf graf--h4 graf-after--pre">Step 5 — Combine all tasks into one&nbsp;task</h4><p name="3d85" id="3d85" class="graf graf--p graf-after--h4">This part is fun. Gulp allows you to combine tasks, and add tasks to other tasks as dependencies. This feature is incredibly useful because you can tell Gulp to run and complete certain tasks before even starting other tasks.</p><pre name="2faf" id="2faf" class="graf graf--pre graf-after--p">gulp.task('copy', ['html', 'css', 'js']);</pre><p name="6e77" id="6e77" class="graf graf--p graf-after--pre">Try it out! Here’s what you’ll see after running <code class="markup--code markup--p-code">gulp copy</code>.</p><pre name="fe9f" id="fe9f" class="graf graf--pre graf-after--p">[19:39:08] Using gulpfile ~/super-awesome-gulp-tutorial/gulpfile.js<br>[19:39:08] Starting 'html'...<br>[19:39:08] Starting 'css'...<br>[19:39:08] Starting 'js'...<br>[19:39:08] Finished 'css' after 19 ms<br>[19:39:08] Finished 'html' after 30 ms<br>[19:39:08] Finished 'js' after 18 ms<br>[19:39:08] Starting 'copy'...<br>[19:39:08] Finished 'copy' after 4.67 μs</pre><p name="02a1" id="02a1" class="graf graf--p graf-after--pre">Jump back to your project folder and take a look. Now you have a <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em></strong><em class="markup--em markup--p-em"> </em>directory. It was created dynamically. Magic! (Just kidding, not really.)<br>The <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em></strong> directory contains the same files you have in the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">src</em></strong> directory. The&nbsp;<code class="markup--code markup--p-code">.pipe()</code> command has copied files from the source to the given destination.</p><h4 name="a7f2" id="a7f2" class="graf graf--h4 graf-after--p">Step 6 — Inject files into the index.html</h4><p name="0df4" id="0df4" class="graf graf--p graf-after--h4">What’s this? Well, you’ve copied the files over to the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em></strong> folder. Now you need to tell the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">index.html</em></strong> which CSS and JavaScript files you want to reference. This is done quite easily with a Gulp plug-in called <code class="markup--code markup--p-code"><a href="https://www.npmjs.com/package/gulp-inject" data-href="https://www.npmjs.com/package/gulp-inject" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">gulp-inject</a></code>. Go ahead jump back to the command prompt and run:</p><pre name="c7e5" id="c7e5" class="graf graf--pre graf-after--p">npm install gulp-inject --save-dev</pre><p name="437d" id="437d" class="graf graf--p graf-after--pre">Now, you need to add a reference in the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">index.html</em></strong> where you wish to inject the files.</p><pre name="d6be" id="d6be" class="graf graf--pre graf-after--p">&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>  &lt;head&gt;<br>    &lt;!-- src/index.html --&gt;<br>  <br>    &lt;!-- inject:css --&gt;<br>    &lt;!-- endinject --&gt;<br>  &lt;/head&gt;<br>  &lt;body&gt;</pre><pre name="dcd7" id="dcd7" class="graf graf--pre graf-after--pre">    &lt;!-- inject:js --&gt;<br>    &lt;!-- endinject --&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt;</pre><p name="fb5a" id="fb5a" class="graf graf--p graf-after--pre">After <code class="markup--code markup--p-code">gulp-inject</code> has been run, there will be files between these comments. Keep in mind they need to look exactly like what is written above.</p><p name="5dfe" id="5dfe" class="graf graf--p graf-after--p">Jump back to the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">gulpfile.js</em></strong> and add this:</p><pre name="fa39" id="fa39" class="graf graf--pre graf-after--p">var inject = require('gulp-inject');</pre><p name="117d" id="117d" class="graf graf--p graf-after--pre">Keep in mind, you’ve already added the reference to the files within the tmp folder. It should look like this:</p><pre name="e57f" id="e57f" class="graf graf--pre graf-after--p">var paths = {<br>  src: 'src/**/*',<br>  srcHTML: 'src/**/*.html',<br>  srcCSS: 'src/**/*.css',<br>  srcJS: 'src/**/*.js',</pre><pre name="da92" id="da92" class="graf graf--pre graf-after--pre">  tmp: 'tmp', // tmp folder<br>  tmpIndex: 'tmp/index.html', // index.html in tmp folder<br>  tmpCSS: 'tmp/**/*.css', // css files in tmp folder<br>  tmpJS: 'tmp/**/*.js', // js files in tmp folder</pre><pre name="4ff3" id="4ff3" class="graf graf--pre graf-after--pre">  dist: 'dist',<br>  distIndex: 'dist/index.html',<br>  distCSS: 'dist/**/*.css',<br>  distJS: 'dist/**/*.js'<br>};</pre><p name="9874" id="9874" class="graf graf--p graf-after--pre">Now you’re ready to add another task to inject the files.</p><pre name="7136" id="7136" class="graf graf--pre graf-after--p">gulp.task('inject', ['copy'], function () {<br>  var css = gulp.src(paths.tmpCSS);<br>  var js = gulp.src(paths.tmpJS);<br>  return gulp.src(paths.tmpIndex)<br>    .pipe(inject( css, { relative:true } ))<br>    .pipe(inject( js, { relative:true } ))<br>    .pipe(gulp.dest(paths.tmp));<br>});</pre><p name="d726" id="d726" class="graf graf--p graf-after--pre">Look at this now. You’ve added the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">‘copy’</em></strong> task as a dependency for the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">‘inject’</em> </strong>task. Gulp will first copy all the files to the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em></strong> directory, only then will it do the injecting. Let’s break this down. You’re placing the <code class="markup--code markup--p-code">gulp.src</code> of the files copied to the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em></strong> folder into two respective variables. One for the CSS, the other for the JavaScript files. In the return statement you grab the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">index.html</em></strong> which has already been piped to <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em></strong> with the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">‘copy’</em></strong> task and&nbsp;<code class="markup--code markup--p-code">.pipe()</code> the <code class="markup--code markup--p-code">inject()</code> function with the variables where you placed the respective files from the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em></strong> directory. The second parameter you pass to the <code class="markup--code markup--p-code">inject()</code> function is an options object. Here, <code class="markup--code markup--p-code">relative:true</code> means that the file paths to be referenced in the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">index.html</em></strong> will be relative. You want this. Trust me. It’ll save you so much headache.</p><p name="d4a1" id="d4a1" class="graf graf--p graf-after--p">Toggle back to the command prompt and run <code class="markup--code markup--p-code">gulp inject</code>. The<strong class="markup--strong markup--p-strong"> <em class="markup--em markup--p-em">index.html</em> </strong>within your <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em></strong><em class="markup--em markup--p-em"> </em>directory should now look like this.</p><pre name="feed" id="feed" class="graf graf--pre graf-after--p">&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>  &lt;head&gt;<br>    &lt;!-- tmp/index.html --&gt;<br>  <br>    &lt;!-- inject:css --&gt;<br>    &lt;link rel="stylesheet" href="style.css"&gt;<br>    &lt;!-- endinject --&gt;<br>  &lt;/head&gt;<br>  &lt;body&gt;</pre><pre name="6e5e" id="6e5e" class="graf graf--pre graf-after--pre">    &lt;!-- inject:js --&gt;<br>    &lt;script src="script.js"&gt;&lt;/script&gt;<br>    &lt;!-- endinject --&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt;</pre><h4 name="7dcb" id="7dcb" class="graf graf--h4 graf-after--pre">Step 7 — Serve the development web&nbsp;server</h4><p name="ebdd" id="ebdd" class="graf graf--p graf-after--h4">I bet you’d like to see the fruits of your labor. I would too. Let’s get a server up and running to quench that thirst.</p><p name="29dd" id="29dd" class="graf graf--p graf-after--p">Go ahead and switch back to the command line and run:</p><pre name="1e1f" id="1e1f" class="graf graf--pre graf-after--p">npm install gulp-webserver --save-dev</pre><p name="2f74" id="2f74" class="graf graf--p graf-after--pre">This is a Gulp plug-in which allows you to run a web server on your local machine. Exactly what you need. After you’ve installed it, go ahead and require it at the top of your <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">gulpfile.js</em></strong>.</p><pre name="82a1" id="82a1" class="graf graf--pre graf-after--p">var webserver = require('gulp-webserver');</pre><p name="b4fe" id="b4fe" class="graf graf--p graf-after--pre">Great! Let’s get the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">‘serve’</em></strong> task coded up.</p><pre name="2982" id="2982" class="graf graf--pre graf-after--p">gulp.task('serve', ['inject'], function () {<br>  return gulp.src(paths.tmp)<br>    .pipe(webserver({<br>      port: 3000,<br>      livereload: true<br>    }));<br>});</pre><p name="25d5" id="25d5" class="graf graf--p graf-after--pre">Once again you need to include a dependency. Here you want the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">‘inject’</em></strong> task to finish before running the web server. Simply reference the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">tmp</em> </strong>directory and&nbsp;<code class="markup--code markup--p-code">.pipe()</code> it to the web server. The <code class="markup--code markup--p-code">gulp-webserver</code> plug-in takes an options object as a parameter. You will need to specify the port on which it will run, and tell the server to reload if it senses any changes. Once you get used to this. There’s no going back.</p><p name="4338" id="4338" class="graf graf--p graf-after--p">Let’s test this out. Add some lines of code to the files in the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">src</em></strong> directory. Here’s a simple example:</p><p name="48c9" id="48c9" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">index.html</em></strong></p><pre name="ce16" id="ce16" class="graf graf--pre graf-after--p">&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>  &lt;head&gt;<br>    &lt;!-- inject:css --&gt;<br>    &lt;!-- endinject --&gt;<br>  &lt;/head&gt;<br>  &lt;body&gt;<br>    &lt;div class="awesome"&gt;This is awesome!&lt;/div&gt;</pre><pre name="9b5d" id="9b5d" class="graf graf--pre graf-after--pre">    &lt;!-- inject:js --&gt;<br>    &lt;!-- endinject --&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt;</pre><p name="e3cc" id="e3cc" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">style.css</em></strong></p><pre name="5623" id="5623" class="graf graf--pre graf-after--p">.awesome {<br>  color: red;<br>}</pre><p name="e074" id="e074" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">script.js</em></strong></p><pre name="20c7" id="20c7" class="graf graf--pre graf-after--p">console.log('Awesome!');</pre><p name="e680" id="e680" class="graf graf--p graf-after--pre">Jump back to the command line and run <code class="markup--code markup--p-code">gulp serve</code>. You should see this get logged back to you.</p><pre name="2dfd" id="2dfd" class="graf graf--pre graf-after--p">[23:50:44] Using gulpfile ~/super-awesome-gulp-tutorial/gulpfile.js<br>[23:50:44] Starting 'html'...<br>[23:50:44] Starting 'css'...<br>[23:50:44] Starting 'js'...<br>[23:50:44] Finished 'html' after 30 ms<br>[23:50:44] Finished 'js' after 19 ms<br>[23:50:44] Finished 'css' after 22 ms<br>[23:50:44] Starting 'copy'...<br>[23:50:44] Finished 'copy' after 4.77 μs<br>[23:50:44] Starting 'inject'...<br>[23:50:44] gulp-inject 1 files into index.html.<br>[23:50:44] gulp-inject 1 files into index.html.<br>[23:50:44] Finished 'inject' after 16 ms<br>[23:50:44] Starting 'serve'...<br>[23:50:44] Webserver started at <a href="http://localhost:3000" data-href="http://localhost:3000" class="markup--anchor markup--pre-anchor" rel="nofollow" target="_blank">http://localhost:3000</a><br>[23:50:44] Finished 'serve' after 18 ms</pre><p name="0450" id="0450" class="graf graf--p graf-after--pre">By running the serve task all of the tasks specified as dependencies have been run first. Exactly what you want. Head over to your browser of choice and open up <a href="http://localhost:3000" data-href="http://localhost:3000" class="markup--anchor markup--p-anchor" rel="nofollow" target="_blank">http://localhost:3000</a>. Hopefully, you’ll see something like this.</p></div>
